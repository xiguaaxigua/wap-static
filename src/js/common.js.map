{"version":3,"sources":["common.es6"],"names":[],"mappings":"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","file":"common.js","sourcesContent":["import {Zepto} from './zepto/zepto.js';\nimport {fclick} from './plugins/fastclick.js';\nimport {lazyload} from './plugins/lazyload.js';\nimport {getUnit, eventUnit, cookieUnit} from './unit/unit.js';\n\n!function(window, document){\n    /**\n     * fixed zepto 点透bug\n     * **/\n    fclick.attach(document.body);\n\n    /**\n     * loading动画\n     */\n    function Loading() {\n\n    }\n    Loading.prototype.start = function () {\n        $('.m-loading').show();\n        $('body').css(\"overflow\",\"hidden\");\n    };\n    Loading.prototype.end = function () {\n        $('.m-loading').hide();\n        $('body').css(\"overflow\",\"auto\");\n    };\n    var loading = new Loading();\n    $.loading = loading;\n\n    /**\n     * 获取语言\n     * **/\n    let languages = cookieUnit.getCookie('languages');\n    if(!languages){\n        let nl = navigator.language;\n        cookieUnit.setCookie('languages', nl, 365);\n    }\n\n    /**\n     * 未登录阻止a链接跳转,跳转到登录页面\n     * */\n    $.fn.denyALink = function (msg) {\n        var t = $(this),\n            jumpUrl = './login.html'; // 登录页面的链接\n\n        t.bind('tap click', function (e) {\n            e.preventDefault();\n            $.pop({\n                type: 'tips',\n                hideTimes: 2000,\n                message: msg ? msg : '暂未登录,将跳转到登录页...',\n                callback: function () {\n                    window.location = jumpUrl;\n                }\n            });\n        });\n    };\n\n    /**\n     * 选择城市\n     * **/\n    $.ChooseListInit = function(btn, list, bool){\n        let [chooseBtn, chooseLst] = [getUnit.id(btn), getUnit.id(list)];\n        if(chooseBtn && chooseLst){\n            eventUnit.addListener(chooseBtn, 'tap', function(){\n                chooseLst.style.display='block';\n            });\n            eventUnit.addListener(chooseLst, 'tap', function(event){\n                let ele = event.target || event.srcElement;\n                const dataJs = ele.getAttribute('data-js');\n                if(dataJs=='J_GoBack'){\n                    chooseLst.style.display='none';\n                }else if(dataJs=='J_ChooseItem'){\n                    let dataId = ele.getAttribute('data-id');\n                    if(bool){\n                        let iner = ele.innerHTML;\n                        $('.J_Location').text(iner);\n                        cookieUnit.setCookie('cityId', ele.getAttribute('data-id'), 365);\n                        if(window.localStorage){\n                            window.localStorage.setItem('cityName', escape(iner));\n                        }else{\n                            cookieUnit.setCookie('cityName', iner, 365);\n                        }\n                        history.go(-1) || (location.href='index.html');\n                    }else{\n                        chooseBtn.value = ele.innerHTML;\n                        chooseBtn.setAttribute('data-id', dataId);\n                        chooseLst.style.display='none';\n                    }\n                }\n                $(chooseBtn).parents('form').trigger('keyup');\n            });\n\n        }else{\n\n        }\n    };\n\n    \n\n    /**\n     * 切换switch\n     * **/\n    $.fn.toggleSwitch = function(){\n        var t = $(this);\n        $(this).on('click', function () {\n            if(t.hasClass('switch-open')){\n                t.addClass('transition').removeClass('switch-open').attr('value', false);\n            }else{\n                t.addClass('transition').addClass('switch-open').attr('value', true);\n            }\n        })\n    };\n\n    /**\n     * 切换标签页\n     * **/\n    $.fn.toggleTab = function(){\n        var t = $(this),\n            target = t.find('.tab-contents'),\n            tw = target.width(),\n            title = t.find('.tab-buttons');\n\n        title.on('click', function(e){\n            let ele = e.target,\n                i = $(ele).index();\n            if (ele == this) return;\n            toTab(i);\n        });\n\n        var toTab = function(i){\n            target.addClass('transition').css({\n                \"-webkit-transform\":\"translate(\" + (-tw * i) + \"px,0)\",\n                \"transform\":\"translate(\" + (-tw * i) + \"px,0)\"\n            });\n            toTitle(i);\n        };\n\n        var toTitle = function(i){\n            if (title.length == 0) return;\n            title.children().toggleClass(\"active\", false).eq(i).toggleClass(\"active\", true);\n        };\n    };\n\n    /***\n     * 全选反选\n     * **/\n    $.fn.checkAll = function(opt){\n        var t = this, checkboxs = $('.' + opt.checkboxClassName);\n        t.on('tap', function () {\n            if($(this).is(':checked')){\n                checkboxs.each(function(){\n                    this.checked = true;\n                });\n            }else{\n                checkboxs.each(function(){\n                    this.checked = false;\n                });\n            }\n        });\n    };\n\n    /**\n     * 轮播\n     * **/\n    $.fn.carousel = function(opt){\n        var t = $(this),\n            target = t.find('.carousel-lists'),\n            tw = target.width(),\n            length = target.children('.carousel-list').length,\n            ch = target.children('.carousel-list'),\n            img = t.find('.carousel-list img'),\n            dot = t.find('.carousel-dots'),\n            m = { initX: 0, initY: 0, startX: 0, endX: 0, startY: 0, canmove: false },\n            currentTab = 0;\n\n        var imgBrowser = function () {\n            target.on('tap', function(){\n                if(target.parent().hasClass('m-carousel-brower')){\n                    target.parent().removeClass('m-carousel-brower');\n                    $('body').css(\"overflow\",\"auto\");\n                }else{\n                    target.parent().addClass('m-carousel-brower');\n                    $('body').css(\"overflow\",\"hidden\");\n                }\n            });\n        };\n\n        if(opt.imgBrower == true){\n            imgBrowser();\n        }\n\n        var num = target.find('.carousel-list').length;\n        for(var j=0; j<num; j++){\n            if(j == 0){\n                dot.append('<li class=\"carousel-dot active\"></li>');\n            }else{\n                dot.append('<li class=\"carousel-dot\"></li>');\n            }\n        }\n\n        var toTab = function(i){\n            move(-tw * i);\n            toDot(i);\n            currentTab = i;\n        };\n\n        var toDot = function(i){\n            if (dot.length == 0) return;\n            dot.children().toggleClass(\"active\", false).eq(i).toggleClass(\"active\", true);\n        };\n        var move = function(dis){\n            target.addClass('transition').css('margin-left', (m.endX = dis) + 'px');\n        };\n\n        t.on(\"touchstart\", function(e) {\n            var et = e.touches[0];\n            if ($(et.target).closest(\".carousel-lists\").length != 0) {\n                m.canmove = true, m.initX = m.startX = et.pageX;\n\n                m.initY = et.pageY;\n            }\n        }).on(\"touchmove\", function(e) {\n            var et = e.touches[0];\n\n            if (m.canmove && Math.abs(et.pageY - m.initY) / Math.abs(et.pageX - m.initX) < 0.6) {\n                m.endX += et.pageX - m.startX;\n                target.removeClass('transition').css('margin-left', m.endX + 'px');\n                m.startX = et.pageX;\n                e.preventDefault();\n            }\n        }).on('touchend', function(e){\n            if( !m.canmove ) return ;\n            target.addClass('transition');\n            var bl = false,\n                current = Math.abs(m.endX / tw);\n\n            if (m.endX > 0) {\n                current = m.endX = 0;\n                bl = true;\n                target.removeClass('transition').css('margin-left', -tw * length + 'px');\n            } else if (m.endX < -tw * (target.children().length - 1)) {\n                current = target.children().length - 1;\n                bl = true;\n            }\n            if (!bl) {\n                if (m.endX % tw != 0) {\n                    var str = parseInt((current + \"\").split(\".\")[1][0]);\n                    if (e.changedTouches[0].pageX > m.initX) {\n                        current = str <= 9 ? Math.floor(Math.abs(current)) : Math.abs(Math.round(m.endX / tw));\n                    } else {\n                        current = str >= 1 ? Math.floor(Math.abs(current)) + 1 : Math.abs(Math.round(m.endX / tw));\n                    }\n                }\n            }\n            toTab(current);\n            m.canmove = false;\n        });\n    };\n\n\n    /**\n     * 商品购买数目\n     * */\n    $.fn.purchaseNumber = function () {\n        var box = $(this);\n        box.children('.J_MinusNumber').on('tap', function () {\n            var showNum = $(this).next();\n            if (parseInt(showNum.html()) > 1) {\n                showNum.html(parseInt(showNum.html()) - 1);\n            }\n        });\n        box.children('.J_AddNumber').on('tap', function () {\n            var showNum = $(this).prev();\n            showNum.html(parseInt(showNum.html()) + 1);\n        });\n    };\n\n    // 加入/删除 收藏\n    $.fn.setFavorite = function (opt) {\n        var btn = $(this),\n            productId = $('.product-img751').attr('data-pid'),\n            url = opt.url ? opt.url : false;\n        if(!url){\n            $.pop({\n                type: 'tips',\n                msg: '参数错误!'\n            });\n            return false;\n        }\n        btn.on('tap', function () {\n            var setFavData = {\n                method: btn.hasClass('icon-love') ? 'add' : 'del',\n                productId: productId\n            };\n            $.ajax({\n                url: url,\n                type: 'POST',\n                data: setFavData,\n                success: function (data) {\n                    data = JSON.parse(data);\n                    if(data.code == 200){\n                        if(btn.hasClass('icon-love')){\n                            btn.removeClass('icon-love').addClass('icon-love-green');\n                        }else{\n                            btn.removeClass('icon-love-green').addClass('icon-love');\n                        }\n                    }else{\n                        $.pop({\n                            type: 'tips',\n                            message: data.msg\n                        });\n                        return false;\n                    }\n                }\n            });\n        });\n    };\n}(window,window.document);\n"]}
{"version":3,"sources":["lazyload.es6"],"names":[],"mappings":";;AAAA;;AAEA,CAAC,UAAS,CAAT,EAAY,MAAZ,EAAoB,QAApB,EAA8B,SAA9B,EAAyC;AACtC,QAAI,UAAU,EAAE,MAAF,CAAd;;AAEA,MAAE,EAAF,CAAK,QAAL,GAAgB,UAAS,OAAT,EAAkB;AAC9B,YAAI,WAAW,IAAf;AACA,YAAI,UAAJ;AACA,YAAI,WAAW;AACX,uBAAkB,CADP;AAEX,2BAAkB,CAFP;AAGX,mBAAkB,QAHP;AAIX,oBAAkB,MAJP;AAKX,uBAAkB,MALP;AAMX,4BAAkB,UANP;AAOX,4BAAkB,IAPP;AAQX,oBAAkB,IARP;AASX,kBAAkB,IATP;AAUX,yBAAkB;AAVP,SAAf;;AAaA,iBAAS,MAAT,GAAkB;AACd,gBAAI,UAAU,CAAd;;AAEA,qBAAS,IAAT,CAAc,YAAW;AACrB,oBAAI,QAAQ,EAAE,IAAF,CAAZ;AACA,oBAAI,SAAS,cAAT,IAA2B,CAAC,MAAM,EAAN,CAAS,UAAT,CAAhC,EAAsD;AAClD;AACH;AACD,oBAAI,EAAE,WAAF,CAAc,IAAd,EAAoB,QAApB,KACA,EAAE,WAAF,CAAc,IAAd,EAAoB,QAApB,CADJ,EACmC;AAC/B;AACH,iBAHD,MAGO,IAAI,CAAC,EAAE,YAAF,CAAe,IAAf,EAAqB,QAArB,CAAD,IACP,CAAC,EAAE,WAAF,CAAc,IAAd,EAAoB,QAApB,CADE,EAC6B;AAChC,0BAAM,OAAN,CAAc,QAAd;AACA;AACA,8BAAU,CAAV;AACH,iBALM,MAKA;AACH,wBAAI,EAAE,OAAF,GAAY,SAAS,aAAzB,EAAwC;AACpC,+BAAO,KAAP;AACH;AACJ;AACJ,aAlBD;AAoBH;;AAED,YAAG,OAAH,EAAY;AACR;AACA,gBAAI,cAAc,QAAQ,YAA1B,EAAwC;AACpC,wBAAQ,aAAR,GAAwB,QAAQ,YAAhC;AACA,uBAAO,QAAQ,YAAf;AACH;AACD,gBAAI,cAAc,QAAQ,WAA1B,EAAuC;AACnC,wBAAQ,YAAR,GAAuB,QAAQ,WAA/B;AACA,uBAAO,QAAQ,WAAf;AACH;;AAED,cAAE,MAAF,CAAS,QAAT,EAAmB,OAAnB;AACH;;AAED;AACA,qBAAc,SAAS,SAAT,KAAuB,SAAvB,IACd,SAAS,SAAT,KAAuB,MADV,GACoB,OADpB,GAC8B,EAAE,SAAS,SAAX,CAD3C;;AAGA;AACA,YAAI,MAAM,SAAS,KAAT,CAAe,OAAf,CAAuB,QAAvB,CAAV,EAA4C;AACxC,uBAAW,IAAX,CAAgB,SAAS,KAAzB,EAAgC,YAAW;AACvC,uBAAO,QAAP;AACH,aAFD;AAGH;;AAED,aAAK,IAAL,CAAU,YAAW;AACjB,gBAAI,OAAO,IAAX;AACA,gBAAI,QAAQ,EAAE,IAAF,CAAZ;;AAEA,iBAAK,MAAL,GAAc,KAAd;;AAEA;AACA,gBAAI,MAAM,IAAN,CAAW,KAAX,MAAsB,SAAtB,IAAmC,MAAM,IAAN,CAAW,KAAX,MAAsB,KAA7D,EAAoE;AAChE,oBAAI,MAAM,EAAN,CAAS,KAAT,CAAJ,EAAqB;AACjB,0BAAM,IAAN,CAAW,KAAX,EAAkB,SAAS,WAA3B;AACH;AACJ;;AAED;AACA,kBAAM,GAAN,CAAU,QAAV,EAAoB,YAAW;AAC3B,oBAAI,CAAC,KAAK,MAAV,EAAkB;AACd,wBAAI,SAAS,MAAb,EAAqB;AACjB,4BAAI,gBAAgB,SAAS,MAA7B;AACA,iCAAS,MAAT,CAAgB,IAAhB,CAAqB,IAArB,EAA2B,aAA3B,EAA0C,QAA1C;AACH;AACD,sBAAE,SAAF,EACK,IADL,CACU,MADV,EACkB,YAAW;;AAErB,4BAAI,WAAW,MAAM,IAAN,CAAW,UAAU,SAAS,cAA9B,CAAf;AACA,8BAAM,IAAN;AACA,4BAAI,MAAM,EAAN,CAAS,KAAT,CAAJ,EAAqB;AACjB,kCAAM,IAAN,CAAW,KAAX,EAAkB,QAAlB;AACH,yBAFD,MAEO;AACH,kCAAM,GAAN,CAAU,kBAAV,EAA8B,UAAU,QAAV,GAAqB,IAAnD;AACH;AACD,8BAAM,SAAS,MAAf,EAAuB,SAAS,YAAhC;;AAEA,6BAAK,MAAL,GAAc,IAAd;;AAEA;AACA,4BAAI,OAAO,EAAE,IAAF,CAAO,QAAP,EAAiB,UAAS,OAAT,EAAkB;AAC1C,mCAAO,CAAC,QAAQ,MAAhB;AACH,yBAFU,CAAX;AAGA,mCAAW,EAAE,IAAF,CAAX;;AAEA,4BAAI,SAAS,IAAb,EAAmB;AACf,gCAAI,gBAAgB,SAAS,MAA7B;AACA,qCAAS,IAAT,CAAc,IAAd,CAAmB,IAAnB,EAAyB,aAAzB,EAAwC,QAAxC;AACH;AACJ,qBAxBL,EAyBK,IAzBL,CAyBU,KAzBV,EAyBiB,MAAM,IAAN,CAAW,UAAU,SAAS,cAA9B,CAzBjB;AA0BH;AACJ,aAjCD;;AAmCA;AACA;AACA,gBAAI,MAAM,SAAS,KAAT,CAAe,OAAf,CAAuB,QAAvB,CAAV,EAA4C;AACxC,sBAAM,IAAN,CAAW,SAAS,KAApB,EAA2B,YAAW;AAClC,wBAAI,CAAC,KAAK,MAAV,EAAkB;AACd,8BAAM,OAAN,CAAc,QAAd;AACH;AACJ,iBAJD;AAKH;AACJ,SA1DD;;AA4DA;AACA,gBAAQ,IAAR,CAAa,QAAb,EAAuB,YAAW;AAC9B;AACH,SAFD;;AAIA;AACA;AACA,YAAK,8BAAD,CAAiC,IAAjC,CAAsC,UAAU,UAAhD,CAAJ,EAAiE;AAC7D,oBAAQ,IAAR,CAAa,UAAb,EAAyB,UAAS,KAAT,EAAgB;AACrC,oBAAI,MAAM,aAAN,IAAuB,MAAM,aAAN,CAAoB,SAA/C,EAA0D;AACtD,6BAAS,IAAT,CAAc,YAAW;AACrB,0BAAE,IAAF,EAAQ,OAAR,CAAgB,QAAhB;AACH,qBAFD;AAGH;AACJ,aAND;AAOH;;AAED;AACA,UAAE,QAAF,EAAY,KAAZ,CAAkB,YAAW;AACzB;AACH,SAFD;;AAIA,eAAO,IAAP;AACH,KArJD;;AAuJA;AACA;;AAEA,MAAE,YAAF,GAAiB,UAAS,OAAT,EAAkB,QAAlB,EAA4B;AACzC,YAAI,IAAJ;;AAEA,YAAI,SAAS,SAAT,KAAuB,SAAvB,IAAoC,SAAS,SAAT,KAAuB,MAA/D,EAAuE;AACnE,mBAAO,CAAC,OAAO,WAAP,GAAqB,OAAO,WAA5B,GAA0C,QAAQ,MAAR,EAA3C,IAA+D,QAAQ,SAAR,EAAtE;AACH,SAFD,MAEO;AACH,mBAAO,EAAE,SAAS,SAAX,EAAsB,MAAtB,GAA+B,GAA/B,GAAqC,EAAE,SAAS,SAAX,EAAsB,MAAtB,EAA5C;AACH;;AAED,eAAO,QAAQ,EAAE,OAAF,EAAW,MAAX,GAAoB,GAApB,GAA0B,SAAS,SAAlD;AACH,KAVD;;AAYA,MAAE,WAAF,GAAgB,UAAS,OAAT,EAAkB,QAAlB,EAA4B;AACxC,YAAI,IAAJ;;AAEA,YAAI,SAAS,SAAT,KAAuB,SAAvB,IAAoC,SAAS,SAAT,KAAuB,MAA/D,EAAuE;AACnE;AACH,SAFD,MAEO;AACH,mBAAO,EAAE,SAAS,SAAX,EAAsB,MAAtB,GAA+B,IAA/B,GAAsC,EAAE,SAAS,SAAX,EAAsB,KAAtB,EAA7C;AACH;;AAED,eAAO,QAAQ,EAAE,OAAF,EAAW,MAAX,GAAoB,IAApB,GAA2B,SAAS,SAAnD;AACH,KAVD;;AAYA,MAAE,WAAF,GAAgB,UAAS,OAAT,EAAkB,QAAlB,EAA4B;AACxC,YAAI,IAAJ;;AAEA,YAAI,SAAS,SAAT,KAAuB,SAAvB,IAAoC,SAAS,SAAT,KAAuB,MAA/D,EAAuE;AACnE,mBAAO,QAAQ,SAAR,EAAP;AACH,SAFD,MAEO;AACH,mBAAO,EAAE,SAAS,SAAX,EAAsB,MAAtB,GAA+B,GAAtC;AACH;;AAED,eAAO,QAAQ,EAAE,OAAF,EAAW,MAAX,GAAoB,GAApB,GAA0B,SAAS,SAAnC,GAAgD,EAAE,OAAF,EAAW,MAAX,EAA/D;AACH,KAVD;;AAYA,MAAE,WAAF,GAAgB,UAAS,OAAT,EAAkB,QAAlB,EAA4B;AACxC,YAAI,IAAJ;;AAEA,YAAI,SAAS,SAAT,KAAuB,SAAvB,IAAoC,SAAS,SAAT,KAAuB,MAA/D,EAAuE;AACnE;AACH,SAFD,MAEO;AACH,mBAAO,EAAE,SAAS,SAAX,EAAsB,MAAtB,GAA+B,IAAtC;AACH;;AAED,eAAO,QAAQ,EAAE,OAAF,EAAW,MAAX,GAAoB,IAApB,GAA2B,SAAS,SAApC,GAAgD,EAAE,OAAF,EAAW,KAAX,EAA/D;AACH,KAVD;;AAYA,MAAE,UAAF,GAAe,UAAS,OAAT,EAAkB,QAAlB,EAA4B;AACvC,eAAO,CAAC,EAAE,WAAF,CAAc,OAAd,EAAuB,QAAvB,CAAD,IAAqC,CAAC,EAAE,WAAF,CAAc,OAAd,EAAuB,QAAvB,CAAtC,IACH,CAAC,EAAE,YAAF,CAAe,OAAf,EAAwB,QAAxB,CADE,IACmC,CAAC,EAAE,WAAF,CAAc,OAAd,EAAuB,QAAvB,CAD3C;AAEH,KAHD;;AAKA;AACA;AACA;;AAEA,MAAE,MAAF,CAAS,EAAE,IAAF,CAAO,GAAP,CAAT,EAAsB;AAClB,0BAAmB,sBAAS,CAAT,EAAY;AAAE,mBAAO,EAAE,YAAF,CAAe,CAAf,EAAkB,EAAC,WAAY,CAAb,EAAlB,CAAP;AAA4C,SAD3D;AAElB,yBAAmB,qBAAS,CAAT,EAAY;AAAE,mBAAO,CAAC,EAAE,YAAF,CAAe,CAAf,EAAkB,EAAC,WAAY,CAAb,EAAlB,CAAR;AAA6C,SAF5D;AAGlB,2BAAmB,uBAAS,CAAT,EAAY;AAAE,mBAAO,EAAE,WAAF,CAAc,CAAd,EAAiB,EAAC,WAAY,CAAb,EAAjB,CAAP;AAA2C,SAH1D;AAIlB,0BAAmB,sBAAS,CAAT,EAAY;AAAE,mBAAO,CAAC,EAAE,WAAF,CAAc,CAAd,EAAiB,EAAC,WAAY,CAAb,EAAjB,CAAR;AAA4C,SAJ3D;AAKlB,uBAAmB,oBAAS,CAAT,EAAY;AAAE,mBAAO,EAAE,UAAF,CAAa,CAAb,EAAgB,EAAC,WAAY,CAAb,EAAhB,CAAP;AAA0C,SALzD;AAMlB;AACA,0BAAmB,sBAAS,CAAT,EAAY;AAAE,mBAAO,CAAC,EAAE,YAAF,CAAe,CAAf,EAAkB,EAAC,WAAY,CAAb,EAAlB,CAAR;AAA6C,SAP5D;AAQlB,yBAAmB,qBAAS,CAAT,EAAY;AAAE,mBAAO,EAAE,WAAF,CAAc,CAAd,EAAiB,EAAC,WAAY,CAAb,EAAjB,CAAP;AAA2C,SAR1D;AASlB,wBAAmB,oBAAS,CAAT,EAAY;AAAE,mBAAO,CAAC,EAAE,WAAF,CAAc,CAAd,EAAiB,EAAC,WAAY,CAAb,EAAjB,CAAR;AAA4C;AAT3D,KAAtB;AAYH,CAlOD,gBAkOU,MAlOV,EAkOkB,QAlOlB","file":"lazyload.js","sourcesContent":["import {Zepto} from '../zepto/zepto.js';\r\n\r\n(function($, window, document, undefined) {\r\n    var $window = $(window);\r\n\r\n    $.fn.lazyload = function(options) {\r\n        var elements = this;\r\n        var $container;\r\n        var settings = {\r\n            threshold       : 0,\r\n            failure_limit   : 0,\r\n            event           : \"scroll\",\r\n            effect          : \"show\",\r\n            container       : window,\r\n            data_attribute  : \"original\",\r\n            skip_invisible  : true,\r\n            appear          : null,\r\n            load            : null,\r\n            placeholder     : \"data:image/jpg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QN3aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAxNCA3OS4xNTE0ODEsIDIwMTMvMDMvMTMtMTI6MDk6MTUgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZDYzYTY5ZTMtN2RmMy02ODRhLWEwYzQtZjJlODlmZGM2NWQyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjY1NjJBMDEyNjA2QTExRTY5NzgxRjM0MzJDODI3MTBEIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY1NjJBMDExNjA2QTExRTY5NzgxRjM0MzJDODI3MTBEIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE0IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjNGOENFNDBGNjA2QTExRTZBMjEzOEY0MUJCODNCQUY0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjNGOENFNDEwNjA2QTExRTZBMjEzOEY0MUJCODNCQUY0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQABgQEBAUEBgUFBgkGBQYJCwgGBggLDAoKCwoKDBAMDAwMDAwQDA4PEA8ODBMTFBQTExwbGxscHx8fHx8fHx8fHwEHBwcNDA0YEBAYGhURFRofHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8f/8AAEQgAOgA6AwERAAIRAQMRAf/EAHsAAAICAwEAAAAAAAAAAAAAAAUGBAcAAQIDAQEAAAAAAAAAAAAAAAAAAAAAEAACAQMBBAUHCAsBAAAAAAABAgMABAURITESBkFRIjITYXFSYoJDFPCBscHRojM0kaHxciNjg0SEFTVFEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwC4bu/5gu+Z8hYWuTNjbWvG+uzgSONQSdANSdtBkOXykRBi5ksrw+hcqy6+0RsoDdhzFxyRwZKEWksp4YbhHElrK3QFlGxWPU1AaIIOh2GgG5TOW1gyQLG93fyjiisoRq5HpN6K+U0AG6zHMcraSZDH4lTui8RZJB5yOKgH5K95ns7E5CHPLewK4jcwMCFcjUBgVoHX4qXyfkPid3vfl0UCvewmDnDJIRp8dYzNGesmPU/rSgSk0KL5hQSLW7mtuIR6NDJsmt22xyDqYfXvFBYOIzo/0Us7EzPaqvgcR7Ugk7MSsfSDdhvNrQJORydy8s8SSk+IxN3Ouxp5Bv1O/gXci7tKAaFUbgBQGbZGflkWyjVr3JIiDr4U0P00FmfDJ1+6+G9mgCc0WFwy22Vs08S8xrcZiG+SE99f0UFfX9vHDPxwHjs59ZLWToKHbw/vJuYUEegNYu4kTHqoPZDTMf6SeKv3jQBF3Cg7RJJJFjjUvK54UQbyT0UDryvi/FubaXY1jig4jkHdmu5Nsjr1qndB8lA3UGwSNo30C5ncLhkLP4y2stweJrUp4screkIV7St6y6UCpJjLESEMpiHQRPGAfZkBYUEu1tIEhijjieWB/iPFn8aP+HxRhejs7tu2ggjGWmg4EkkPoi4t/wBtAewmIwssogkuBDK47VmA8csg6VMsnaZfImlA4xxRxRrFEgjjjHCkajRVA6AKDdAPzeUbH2qeAglvrlxBZQnc0jdLequ80Fd5TIyvcTRxzNJqSJ7rc87jedehNe6o2aUA3hHVQFrFCca2g3i5PzeGo+qgEhV03Cgk2940YEUwM1prq8JJ1HrRtvRx0EUD7y1mZnmbFXkvjTJGJrK7Owz27DUE+so30DBQKObuml5ju23piMfI8Y6pZF018/aoEdRooHVQdxxySSLFGpeRzwog3k9VA64TD8eEuXQCXhASDT3nhktMV8jMSq+agTLm3a3mMROo70b9DIe6woPOgOQXD2+OweUXY9pcy25P8sMG0+8aCy9Y+sbuP2Ougr68yNha8zZ+HIGRbe8DQccQDOuvCQQDQQFg5UY8MMuQun6Io4kUn5+1QHcVy1cT961/1Vgw0l4m47yZfRL+7U9OlA4RpHFGkcSiOOMBY0XYFUbgKBfzfLQnLTW0CXEbsXksmbwyGPee3kHcZulT2TQKs2LwcUhS6nvcc43x3MAcD20OhoOMvdYiLAwY2wuzeOk8lw8hQxgcS6BQDQWBxP5f+Xr7X20EfKfmf/O3D81+L89BPx3c/tf8X5bqCQaDVBlBq4/A93/kdygBp+YX/kd4bu9v+mgP/bQf/9k=\"\r\n        };\r\n\r\n        function update() {\r\n            var counter = 0;\r\n\r\n            elements.each(function() {\r\n                var $this = $(this);\r\n                if (settings.skip_invisible && !$this.is(\":visible\")) {\r\n                    return;\r\n                }\r\n                if ($.abovethetop(this, settings) ||\r\n                    $.leftofbegin(this, settings)) {\r\n                    /* Nothing. */\r\n                } else if (!$.belowthefold(this, settings) &&\r\n                    !$.rightoffold(this, settings)) {\r\n                    $this.trigger(\"appear\");\r\n                    /* if we found an image we'll load, reset the counter */\r\n                    counter = 0;\r\n                } else {\r\n                    if (++counter > settings.failure_limit) {\r\n                        return false;\r\n                    }\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        if(options) {\r\n            /* Maintain BC for a couple of versions. */\r\n            if (undefined !== options.failurelimit) {\r\n                options.failure_limit = options.failurelimit;\r\n                delete options.failurelimit;\r\n            }\r\n            if (undefined !== options.effectspeed) {\r\n                options.effect_speed = options.effectspeed;\r\n                delete options.effectspeed;\r\n            }\r\n\r\n            $.extend(settings, options);\r\n        }\r\n\r\n        /* Cache container as jQuery as object. */\r\n        $container = (settings.container === undefined ||\r\n        settings.container === window) ? $window : $(settings.container);\r\n\r\n        /* Fire one scroll event per scroll. Not one scroll event per image. */\r\n        if (0 === settings.event.indexOf(\"scroll\")) {\r\n            $container.bind(settings.event, function() {\r\n                return update();\r\n            });\r\n        }\r\n\r\n        this.each(function() {\r\n            var self = this;\r\n            var $self = $(self);\r\n\r\n            self.loaded = false;\r\n\r\n            /* If no src attribute given use data:uri. */\r\n            if ($self.attr(\"src\") === undefined || $self.attr(\"src\") === false) {\r\n                if ($self.is(\"img\")) {\r\n                    $self.attr(\"src\", settings.placeholder);\r\n                }\r\n            }\r\n\r\n            /* When appear is triggered load original image. */\r\n            $self.one(\"appear\", function() {\r\n                if (!this.loaded) {\r\n                    if (settings.appear) {\r\n                        var elements_left = elements.length;\r\n                        settings.appear.call(self, elements_left, settings);\r\n                    }\r\n                    $(\"<img />\")\r\n                        .bind(\"load\", function() {\r\n\r\n                            var original = $self.attr(\"data-\" + settings.data_attribute);\r\n                            $self.hide();\r\n                            if ($self.is(\"img\")) {\r\n                                $self.attr(\"src\", original);\r\n                            } else {\r\n                                $self.css(\"background-image\", \"url('\" + original + \"')\");\r\n                            }\r\n                            $self[settings.effect](settings.effect_speed);\r\n\r\n                            self.loaded = true;\r\n\r\n                            /* Remove image from array so it is not looped next time. */\r\n                            var temp = $.grep(elements, function(element) {\r\n                                return !element.loaded;\r\n                            });\r\n                            elements = $(temp);\r\n\r\n                            if (settings.load) {\r\n                                var elements_left = elements.length;\r\n                                settings.load.call(self, elements_left, settings);\r\n                            }\r\n                        })\r\n                        .attr(\"src\", $self.attr(\"data-\" + settings.data_attribute));\r\n                }\r\n            });\r\n\r\n            /* When wanted event is triggered load original image */\r\n            /* by triggering appear.                              */\r\n            if (0 !== settings.event.indexOf(\"scroll\")) {\r\n                $self.bind(settings.event, function() {\r\n                    if (!self.loaded) {\r\n                        $self.trigger(\"appear\");\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        /* Check if something appears when window is resized. */\r\n        $window.bind(\"resize\", function() {\r\n            update();\r\n        });\r\n\r\n        /* With IOS5 force loading images when navigating with back button. */\r\n        /* Non optimal workaround. */\r\n        if ((/(?:iphone|ipod|ipad).*os 5/gi).test(navigator.appVersion)) {\r\n            $window.bind(\"pageshow\", function(event) {\r\n                if (event.originalEvent && event.originalEvent.persisted) {\r\n                    elements.each(function() {\r\n                        $(this).trigger(\"appear\");\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n        /* Force initial check if images should appear. */\r\n        $(document).ready(function() {\r\n            update();\r\n        });\r\n\r\n        return this;\r\n    };\r\n\r\n    /* Convenience methods in jQuery namespace.           */\r\n    /* Use as  $.belowthefold(element, {threshold : 100, container : window}) */\r\n\r\n    $.belowthefold = function(element, settings) {\r\n        var fold;\r\n\r\n        if (settings.container === undefined || settings.container === window) {\r\n            fold = (window.innerHeight ? window.innerHeight : $window.height()) + $window.scrollTop();\r\n        } else {\r\n            fold = $(settings.container).offset().top + $(settings.container).height();\r\n        }\r\n\r\n        return fold <= $(element).offset().top - settings.threshold;\r\n    };\r\n\r\n    $.rightoffold = function(element, settings) {\r\n        var fold;\r\n\r\n        if (settings.container === undefined || settings.container === window) {\r\n            //fold = $window.width() + $window.scrollLeft();\r\n        } else {\r\n            fold = $(settings.container).offset().left + $(settings.container).width();\r\n        }\r\n\r\n        return fold <= $(element).offset().left - settings.threshold;\r\n    };\r\n\r\n    $.abovethetop = function(element, settings) {\r\n        var fold;\r\n\r\n        if (settings.container === undefined || settings.container === window) {\r\n            fold = $window.scrollTop();\r\n        } else {\r\n            fold = $(settings.container).offset().top;\r\n        }\r\n\r\n        return fold >= $(element).offset().top + settings.threshold  + $(element).height();\r\n    };\r\n\r\n    $.leftofbegin = function(element, settings) {\r\n        var fold;\r\n\r\n        if (settings.container === undefined || settings.container === window) {\r\n            //fold = $window.scrollLeft();\r\n        } else {\r\n            fold = $(settings.container).offset().left;\r\n        }\r\n\r\n        return fold >= $(element).offset().left + settings.threshold + $(element).width();\r\n    };\r\n\r\n    $.inviewport = function(element, settings) {\r\n        return !$.rightoffold(element, settings) && !$.leftofbegin(element, settings) &&\r\n            !$.belowthefold(element, settings) && !$.abovethetop(element, settings);\r\n    };\r\n\r\n    /* Custom selectors for your convenience.   */\r\n    /* Use as $(\"img:below-the-fold\").something() or */\r\n    /* $(\"img\").filter(\":below-the-fold\").something() which is faster */\r\n\r\n    $.extend($.expr[\":\"], {\r\n        \"below-the-fold\" : function(a) { return $.belowthefold(a, {threshold : 0}); },\r\n        \"above-the-top\"  : function(a) { return !$.belowthefold(a, {threshold : 0}); },\r\n        \"right-of-screen\": function(a) { return $.rightoffold(a, {threshold : 0}); },\r\n        \"left-of-screen\" : function(a) { return !$.rightoffold(a, {threshold : 0}); },\r\n        \"in-viewport\"    : function(a) { return $.inviewport(a, {threshold : 0}); },\r\n        /* Maintain BC for couple of versions. */\r\n        \"above-the-fold\" : function(a) { return !$.belowthefold(a, {threshold : 0}); },\r\n        \"right-of-fold\"  : function(a) { return $.rightoffold(a, {threshold : 0}); },\r\n        \"left-of-fold\"   : function(a) { return !$.rightoffold(a, {threshold : 0}); }\r\n    });\r\n\r\n})(Zepto, window, document);\r\n"]}
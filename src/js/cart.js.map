{"version":3,"sources":["cart.es6"],"names":[],"mappings":"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","file":"cart.js","sourcesContent":["/**\n * Created by xiangran.kong on 16/08/11.\n */\nimport {getUnit, eventUnit, cookieUnit} from './unit/unit.js';\n\nlet cart = {\n    init (){\n        this.numberHandle();\n        this.settlement();\n        this.delProduct();\n    },\n\n    //购物车数量操作\n    numberHandle (){\n        //减购物车数量\n        $(document).on('click', '.J_MinusNumber',function(){\n            let $item = $(this).parents('.J_CartItem'),\n                $currentNumInput= $(this).siblings('.J_CurrentNumber'),\n                pid = $item.attr('data-pid'),   //所操作产品的pid\n                currentNum= $currentNumInput.text();    //所操作产品的数量\n\n            $.ajax({\n                url: '',\n                type: 'post',\n                data: {'pid': pid, 'num': currentNum},\n                beforeSend: function(){\n                    if(!pid || !currentNum){\n                        $.pop({\n                            type: 'tips',\n                            hideTimes: 3000,\n                            message: '数据错误，请刷新页面'\n                        });\n                        return false;\n                    }\n                },\n                success: function(data){\n                    data= {\n                        success: true,\n                        number: 6,\n                        msg:'测试:库存不足'\n                    };\n                    if(data.success){\n                        $currentNumInput.text(data.number);\n                    }else{\n                        $.pop({\n                            type: 'tips',\n                            hideTimes: 3000,\n                            message: data.msg\n                        });\n                    }\n\n                }\n            });\n\n        });\n        //减购物车数量\n        $(document).on('click', '.J_AddNumber',function(){\n            let $item = $(this).parents('.J_CartItem'),\n                $currentNumInput= $(this).siblings('.J_CurrentNumber'),\n                pid = $item.attr('data-pid'),   //所操作产品的pid\n                currentNum= $currentNumInput.text();    //所操作产品的数量\n\n            $.ajax({\n                url: '',\n                type: 'post',\n                data: {'pid': pid, 'num': currentNum},\n                beforeSend: function(){\n                    if(!pid || !currentNum){\n                        $.pop({\n                            type: 'tips',\n                            hideTimes: 3000,\n                            message: '数据错误，请刷新页面'\n                        });\n                        return false;\n                    }\n                },\n                success: function(data){\n                    data= {\n                        success: false,\n                        number: 5,\n                        msg:'测试:库存不足'\n                    };\n                    if(data.success){\n                        $currentNumInput.text(data.number);\n                    }else{\n                        $.pop({\n                            type: 'tips',\n                            hideTimes: 3000,\n                            message: data.msg\n                        });\n                    }\n\n                }\n            });\n        });\n    },\n\n    //结算\n    settlement (){\n        let sl = getUnit.id('J_Settlement');\n        if(sl){\n            eventUnit.addListener(sl, 'click', function(){\n                let [productList, produtData] = [getUnit.cls('J_CartItem'), []];\n                for(let i in productList){\n                    let json = {\n                        pid: productList[i].getAttribute('J_CartItem'),\n                        number: $(productList[i]).find('.J_CurrentNumber').text()\n                    };\n                    produtData.push(json);\n                }\n                if(produtData.length>0){\n                    $.ajax({\n                        url:'',\n                        type: 'post',\n                        data: produtData,\n                        success: function(data){\n                            //根据后台数据进行微调\n                            $.pop({\n                                type:'tips',\n                                hideTimes: 3000,\n                                message: '测试弹窗'\n                            });\n                        }\n                    })\n                }\n            });\n        }\n    },\n\n    //删除\n    delProduct (){\n        let $cartItem = $('.J_CartItem');\n\n        //显示/隐藏删除按钮\n        $(document).on('swipeLeft', '.J_CartItem', function(){\n            $(this).css({left:'-60px'});\n        });\n        $(document).on('swipeRight', '.J_CartItem', function(){\n            $(this).css({left:'0'});\n        });\n\n        //删除产品\n\n    }\n\n\n};\ncart.init();\n"]}
{"version":3,"sources":["verification.class.es6"],"names":[],"mappings":"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","file":"verification.class.js","sourcesContent":["/**\n * Created by xiangran.kong on 16/08/02.\n */\nimport {popup} from  './popup.class.js';\n\n//验证\nclass Verification {\n    constructor (options){\n        //验证是否有需要验证的表单\n        this.$ver = $(options.input);\n        this.$submitBtn = $(options.submitBtn);\n        this.length = this.$ver.length;\n        this.verifyValue = [];\n        if(this.length>0){\n            this._init();\n        }else{\n            //console.log('没有需要验证的表单!');\n        }\n    }\n\n    //初始化验证插件\n    _init (){\n        let [ mustFill, that] = [ [], this];\n        for(let i=0; i<this.length; i++){\n            let verifyData = this._formatJson(this.$ver.eq(i).attr('data-verify'), this.$ver.get(i));\n            this.verifyValue.push(verifyData);\n            verifyData.required && mustFill.push(this.$ver.eq(i));\n        }\n        //必填的监听\n        this._unEmpty(mustFill);\n    }\n\n    //格式化字符串\n    _formatJson (string, ele){\n        let [json, tmp, key, value] = [{}, [], '',''];\n        tmp = string.trim().split(',');\n        for(let i=0; i<tmp.length; i++){\n            let vArr= tmp[i].split(':');\n            key = vArr[0].trim().replace(/{|}/,'');\n            value = vArr[1].trim().replace(/{|}/,'');\n            json[key] = value.trim();\n        }\n        json['ele'] = ele;\n        return json;\n    }\n\n    /**\n     * 验证表单,自动获取表单中的参数，参与验证\n     **/\n    check(){\n        let verifyValue = this.verifyValue, passwordValue;\n        return verifyValue.every(function(item, index){\n            //console.log(item);\n            let [type, value, result, msg] = [item.type, item.ele.value, true, item.msg];\n            switch (type){\n                case 'userName':\n                    if(!(/^([a-z0-9_\\.-]+)@([\\da-z\\.-]+)\\.([a-z\\.]{2,6})$/.test(value) || /^[0-9]{11}$/.test(value))){\n                        popup({\n                            type: 'tips',\n                            hideTimes: 2000,\n                            message: msg\n                        });\n                        result =false;\n                    }\n                    break;\n                case 'tel':\n                    if(!/^[0-9]{11}$/.test(value)){\n                        popup({\n                            type: 'tips',\n                            hideTimes: 2000,\n                            message: msg\n                        });\n                        result =false;\n                    }\n                    break;\n                case 'email':\n                    if(!/^([a-z0-9_\\.-]+)@([\\da-z\\.-]+)\\.([a-z\\.]{2,6})$/.test(value)){\n                        popup({\n                            type: 'tips',\n                            hideTimes: 2000,\n                            message: msg\n                        });\n                        result =false;\n                    }\n                    break;\n                case 'password':\n                    if(!/^[a-z0-9A-Z]{6,18}$/.test(value)){\n                        popup({\n                            type: 'tips',\n                            hideTimes: 5000,\n                            message: msg\n                        });\n                        result =false;\n                    }\n                    passwordValue=value;\n                    break;\n                case 'repassword':\n                    if(value!=passwordValue){\n                        popup({\n                            type: 'tips',\n                            hideTimes: 5000,\n                            message: msg\n                        });\n                        result =false;\n                    }\n                    break;\n                default : break;\n            }\n            return result;\n        });\n    }\n\n    /**\n     * 查看密码\n     * @param btn 查看密码按钮\n     * @param ele password表单元素\n     * **/\n    // lookover (btn, ele){\n    //     btn.on('touchstart', function(){\n    //         ele.attr('type', 'text');\n    //     });\n    //     btn.on('touchend', function(){\n    //         ele.attr('type', 'password');\n    //     });\n    // }\n    lookover (btn, ele){\n        let flag = true;\n        btn.on('tap', function(){\n            if(flag){\n                btn.removeClass('icon-eye-close').addClass('icon-eye-open');\n                ele.attr('type', 'text');\n            }else{\n                btn.removeClass('icon-eye-open').addClass('icon-eye-close');\n                ele.attr('type', 'password');\n            }\n            flag = !flag;\n        });\n    }\n\n    //是否为空\n    _unEmpty(eleArray){\n        let [isSubmit, that, form] = [null, this, eleArray[0].parents('form').eq(0)];\n        let mustItem = document.getElementById('J_ConfirmFieldsTerms');\n        if(eleArray.length<=0){\n            return false;\n        }\n        form.bind('keyup change', function(event){\n            if(mustItem && !mustItem.checked){\n                that.$submitBtn.attr('disabled', 'disabled');\n                return false;\n            }\n\n            if(event.target.nodeType == 1){\n                isSubmit = eleArray.every(function(item, index){\n                    if(item[0].nodeName.toLocaleLowerCase() == 'select'){\n                        return item.val()!=0;\n                    }else{\n                        return item.val()!='';\n                    }\n                });\n                //if(event.target){}\n            }\n            if(isSubmit){\n                that.$submitBtn.removeAttr('disabled');\n            }else{\n                that.$submitBtn.attr('disabled', 'disabled');\n            }\n        });\n    }\n}\n\n/**\n * 验证表单\n * @param 要验证的className，在表单元素后面有验证格式\n * @param 提交按钮idName,是否可以提交\n * **/\n$.verify = new Verification({\n    input: '.J_Verify929',\n    submitBtn: '.J_SubmitBtn',\n    lookOver: '#J_LookOver'\n});\n"]}
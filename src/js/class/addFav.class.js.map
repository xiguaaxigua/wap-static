{"version":3,"sources":["addFav.class.es6"],"names":[],"mappings":";;qjBAAA;;;;;AAGA;;;;IAEM,M;AACF,oBAAa,KAAb,EAAoB,SAApB,EAA8B;AAAA;;AAC1B,YAAI,OAAO,IAAX;AACA,aAAK,GAAL,GAAW,KAAX;AACA,aAAK,SAAL,GAAiB,SAAjB;AACA;AACA,cAAM,EAAN,CAAS,YAAT,EAAuB,YAAU;AAC7B;AACA,gBAAM,YAAY,MAAM,IAAN,CAAW,OAAX,CAAlB;AACA,gBAAG,oBAAoB,IAApB,CAAyB,SAAzB,CAAH,EAAuC;AACnC;AACA,qBAAK,UAAL,CAAgB,SAAhB;AACH,aAHD,MAGK;AACD;AACA,qBAAK,OAAL,CAAa,SAAb;AACH;AACD,oBAAQ,GAAR,CAAY,SAAZ;AACH,SAXD;AAaH;AACD;;;;;;;mCAGY,S,EAAU;AAClB,gBAAI,OAAO,IAAX;AACA,cAAE,IAAF,CAAO;AACH,qBAAI,EADD;AAEH,sBAAK,MAFF;AAGH,sBAAM,EAAC,aAAa,SAAd,EAHH;AAIH,yBAAQ,iBAAS,IAAT,EAAc;AAClB;AACA,2BAAK;AACD,iCAAS,IADR;AAED,6BAAK;AAFJ,qBAAL;AAIA,wBAAG,KAAK,OAAR,EAAgB;AACZ,6BAAK,GAAL,CAAS,WAAT,CAAqB,iBAArB,EAAwC,QAAxC,CAAiD,WAAjD;AACH,qBAFD,MAEK;AACD,0BAAE,GAAF,CAAM;AACF,kCAAM,MADJ;AAEF,uCAAW,IAFT;AAGF,qCAAS,KAAK;AAHZ,yBAAN;AAKA,+BAAO,KAAP;AACH;AACJ;;AApBE,aAAP;AAuBH;;AAED;;;;;;gCAGS,S,EAAU;AACf,gBAAI,OAAO,IAAX;AACA,cAAE,IAAF,CAAO;AACH,qBAAI,EADD;AAEH,sBAAK,MAFF;AAGH,sBAAM,EAAC,aAAa,SAAd,EAHH;AAIH,yBAAQ,iBAAS,IAAT,EAAc;AAClB;AACA,2BAAK;AACD,iCAAS,IADR;AAED,6BAAK;AAFJ,qBAAL;AAIA,wBAAG,KAAK,OAAR,EAAgB;AACZ,6BAAK,GAAL,CAAS,WAAT,CAAqB,WAArB,EAAkC,QAAlC,CAA2C,iBAA3C;AACH,qBAFD,MAEK;AACD,0BAAE,GAAF,CAAM;AACF,kCAAM,MADJ;AAEF,uCAAW,IAFT;AAGF,qCAAS,KAAK;AAHZ,yBAAN;AAKA,+BAAO,KAAP;AACH;AACJ;;AApBE,aAAP;AAuBH;;;;;;AAGL;;;AACA,EAAE,EAAF,CAAK,MAAL,GAAc,UAAS,SAAT,EAAmB;AAC7B,WAAO,IAAI,MAAJ,CAAW,EAAE,IAAF,EAAQ,SAAR,CAAX,CAAP;AACH,CAFD","file":"addFav.class.js","sourcesContent":["/**\r\n * Created by xiangran.kong on 16/08/11.\r\n */\r\nimport {getUnit, eventUnit, cookieUnit} from './../unit/unit.js';\r\n\r\nclass AddFav {\r\n    constructor ($this, productId){\r\n        let that = this;\r\n        this.ele = $this;\r\n        this.productId = productId;\r\n        //事件绑定\r\n        $this.on('touchstart', function(){\r\n            //判断是加入收藏，还是取消收藏\r\n            const className = $this.attr('class');\r\n            if(/icon\\-love\\-green/.test(className)){\r\n                //取消收藏\r\n                that._cancelFav(productId);\r\n            }else{\r\n                //添加收藏\r\n                that._addFav(productId);\r\n            }\r\n            console.log(className);\r\n        });\r\n\r\n    }\r\n    /**\r\n     * 取消收藏\r\n     * **/\r\n    _cancelFav (productId){\r\n        let that = this;\r\n        $.ajax({\r\n            url:'',\r\n            type:'post',\r\n            data: {'productId': productId},\r\n            success:function(data){\r\n                //假数据\r\n                data={\r\n                    success: true,\r\n                    msg: '失败，数据错误'\r\n                };\r\n                if(data.success){\r\n                    that.ele.removeClass('icon-love-green').addClass('icon-love');\r\n                }else{\r\n                    $.pop({\r\n                        type: 'tips',\r\n                        hideTimes: 5000,\r\n                        message: data.msg\r\n                    });\r\n                    return false;\r\n                }\r\n            }\r\n\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 添加收藏\r\n     * **/\r\n    _addFav (productId){\r\n        let that = this;\r\n        $.ajax({\r\n            url:'',\r\n            type:'post',\r\n            data: {'productId': productId},\r\n            success:function(data){\r\n                //假数据\r\n                data={\r\n                    success: true,\r\n                    msg: '失败，数据错误'\r\n                };\r\n                if(data.success){\r\n                    that.ele.removeClass('icon-love').addClass('icon-love-green');\r\n                }else{\r\n                    $.pop({\r\n                        type: 'tips',\r\n                        hideTimes: 5000,\r\n                        message: data.msg\r\n                    });\r\n                    return false;\r\n                }\r\n            }\r\n\r\n        })\r\n    };\r\n}\r\n\r\n//收藏，绑定收藏元素\r\n$.fn.addFav = function(productId){\r\n    return new AddFav($(this, productId));\r\n};\r\n"]}